<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>GDP Growth</title>
		
		<!-- Load css for c3 basic styles -->
		<link rel="stylesheet" type="text/css" href="c3/c3.css">
		
		<!-- Load jQuery, d3.js and c3.js -->
		<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
		<script src="http://d3js.org/d3.v3.min.js"></script>
		<script src="c3/c3.min.js"></script>		
    </head>
    <body>

	<div>Chart#1
		<select id="country1" onchange="GetSelectedItem1();">
			<option value="SouthEastAsia">South-East Asia</option>
			<option value="Brunei">Brunei Darussalam</option>
			<option value="Cambodia">Cambodia</option>
			<option value="Indonesia">Indonesia</option>
			<option value="LPDR">Lao PDR</option>
			<option value="Malaysia">Malaysia</option>
			<option value="Myanmar">Myanmar</option>
			<option value="Philippines">Philippines</option>
			<option value="Singapore">Singapore</option>
			<option value="Thailand">Thailand</option>
			<option value="TimorLeste">Timor-Leste</option>
			<option value="VietNam">Viet Nam</option>
		</select>
	</div>
	<div id="chart" style="height:350px"></div>
	
	<div>Chart#2
		<select id="country2" onchange="GetSelectedItem2();">
			<option value="SouthEastAsia">South-East Asia</option>
			<option value="Brunei">Brunei Darussalam</option>
			<option value="Cambodia">Cambodia</option>
			<option value="Indonesia">Indonesia</option>
			<option value="LPDR">Lao PDR</option>
			<option value="Malaysia">Malaysia</option>
			<option value="Myanmar">Myanmar</option>
			<option value="Philippines">Philippines</option>
			<option value="Singapore">Singapore</option>
			<option value="Thailand">Thailand</option>
			<option value="TimorLeste">Timor-Leste</option>
			<option value="VietNam">Viet Nam</option>
		</select>VS
		<select id="country3" onchange="GetSelectedItem3();">
			<option value="SouthEastAsia_c">South-East Asia</option>
			<option value="Brunei_c">Brunei Darussalam</option>
			<option value="Cambodia_c">Cambodia</option>
			<option value="Indonesia_c">Indonesia</option>
			<option value="LPDR_c">Lao PDR</option>
			<option value="Malaysia_c">Malaysia</option>
			<option value="Myanmar_c">Myanmar</option>
			<option value="Philippines_c">Philippines</option>
			<option value="Singapore_c">Singapore</option>
			<option value="Thailand_c">Thailand</option>
			<option value="TimorLeste_c">Timor-Leste</option>
			<option value="VietNam_c">Viet Nam</option>
		</select>
	</div>
	<div id="chart2" style="height:350px"></div>
	
	<script type="text/javascript">
	
	function GetSelectedItem1() {
		var e = document.getElementById("country1");
		var strSel = e.options[e.selectedIndex].value;
		chart.load({
			url: '/myd3/gdp_by_sector/'+strSel+'.csv'
		});
	}
	
	function GetSelectedItem2() {
		var e = document.getElementById("country2");
		var strSel = e.options[e.selectedIndex].value;
		var c2name = e.options[e.selectedIndex].text;
		chart2.load({
			url: '/myd3/gdp_by_sector/'+strSel+'.csv'
		});
		chart2.data.names({sec1: 'Agriculture ('+c2name+')', sec2: 'Industry ('+c2name+')', sec3: 'Services ('+c2name+')'});
	}
	
	function GetSelectedItem3() {
		var e = document.getElementById("country3");
		var strSel = e.options[e.selectedIndex].value;
		var c2name = e.options[e.selectedIndex].text;
		chart2.load({
			url: '/myd3/gdp_by_sector/'+strSel+'.csv'
		});
		chart2.groups([['sec1', 'sec2', 'sec3'],['sec4', 'sec5', 'sec6']]);
		chart2.data.names({sec4: 'Agriculture ('+c2name+')', sec5: 'Industry ('+c2name+')', sec6: 'Services ('+c2name+')'});
	}
	
	var chart = c3.generate({
		data: {
			x: 'year',
			x_format: '%Y',
			url: '/myd3/gdp_by_sector/SouthEastAsia.csv',
			names: {
				sec1: 'Agriculture',
				sec2: 'Industry',
				sec3: 'Services'
			},
			type: 'bar',
			groups: [
				['sec1', 'sec2', 'sec3']
			]
		},
		bar: {
			width: {
				ratio: 0.9
			}
		},
		color: {
			pattern: ['#29A329', '#CC7A00', '#297ACC', '#5CD65C', '#FFAD33', '#5CADFF']
		},	
		axis: {
			y: {
				tick: {
					format: d3.format("%")
				}
			},
			x: {
				type : 'timeseries',
				tick : {
					format : "%Y",
					culling: false
				}
			}
		}
	});	
	
	var chart2 = c3.generate({
		bindto: '#chart2',
		data: {
			x: 'year',
			x_format: '%Y',
			url: '/myd3/gdp_by_sector/SouthEastAsia.csv',
			names: {
				sec1: 'Agriculture',
				sec2: 'Industry',
				sec3: 'Service'
			},
			type: 'bar',
			groups: [
				['sec1', 'sec2', 'sec3']
			]
		},
		bar: {
			width: {
				ratio: 0.9
			}
		},
		color: {
			pattern: ['#29A329', '#CC7A00', '#297ACC', '#5CD65C', '#FFAD33', '#5CADFF']
		},	
		axis: {
			y: {
				tick: {
					format: d3.format("%")
				}
			},
			x: {
				type : 'timeseries',
				tick : {
					format : "%Y",
					culling: false
				}
			}
		}
	});

	</script>
    </body>
</html>