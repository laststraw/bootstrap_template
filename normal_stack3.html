<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>GDP Growth</title>
		
		<!-- Load css for c3 basic styles -->
		<link rel="stylesheet" type="text/css" href="c3/c3.css">
		
		<!-- Load jQuery, d3.js and c3.js -->
		<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
		<script src="http://d3js.org/d3.v3.min.js"></script>
		<script src="c3/c3.min.js"></script>		
    </head>
    <body>

	<div>Chart#1
		<select id="country1" onchange="GetSelectedItem1();">
			<option value="SouthEastAsia">South-East Asia</option>
			<option value="Brunei">Brunei Darussalam</option>
			<option value="Cambodia">Cambodia</option>
			<option value="Indonesia">Indonesia</option>
			<option value="LPDR">Lao PDR</option>
			<option value="Malaysia">Malaysia</option>
			<option value="Myanmar">Myanmar</option>
			<option value="Philippines">Philippines</option>
			<option value="Singapore">Singapore</option>
			<option value="Thailand">Thailand</option>
			<option value="TimorLeste">Timor-Leste</option>
			<option value="VietNam">Viet Nam</option>
		</select>
	</div>
	<div id="chart" style="height:350px"></div>
	
	<div>Chart#2
		<select id="country2" onchange="GetSelectedItem2();">
			<option value="SouthEastAsia">South-East Asia</option>
			<option value="Brunei">Brunei Darussalam</option>
			<option value="Cambodia">Cambodia</option>
			<option value="Indonesia">Indonesia</option>
			<option value="LPDR">Lao PDR</option>
			<option value="Malaysia">Malaysia</option>
			<option value="Myanmar">Myanmar</option>
			<option value="Philippines">Philippines</option>
			<option value="Singapore">Singapore</option>
			<option value="Thailand">Thailand</option>
			<option value="TimorLeste">Timor-Leste</option>
			<option value="VietNam">Viet Nam</option>
		</select>
	</div>
	<div id="chart2" style="height:350px"></div>
	
	<script type="text/javascript">
	
	function GetSelectedItem1() {
		var e = document.getElementById("country1");
		var strSel = e.options[e.selectedIndex].value;
		chart.load({
			url: '/myd3/gdp_by_sector/'+strSel+'.csv'
		});
	}
	
	function GetSelectedItem2() {
		var e = document.getElementById("country2");
		var strSel = e.options[e.selectedIndex].value;
		chart2.load({
			url: '/myd3/gdp_by_sector/'+strSel+'.csv'
		});
	}
	
	var chart = c3.generate({
		data: {
			x: 'year',
			x_format: '%Y',
			url: '/myd3/gdp_by_sector/SouthEastAsia.csv',
			names: {
				sec1: 'Agriculture',
				sec2: 'Industry',
				sec3: 'Services'
			},
			type: 'bar',
			groups: [
				['sec1', 'sec2', 'sec3']
			]
		},
		bar: {
			width: {
				ratio: 0.9
			}
		},
		color: {
			pattern: ['#4DB870', '#DB944D', '#94B8FF', '#94B8FF', '#A366FF', '#FF99FF', '#FF8533', '#B85C00', '#98df8a', '#d62728', '#ff9896', '#9467bd', '#c5b0d5', '#8c564b', '#c49c94', '#e377c2', '#f7b6d2', '#7f7f7f', '#c7c7c7', '#bcbd22', '#dbdb8d', '#17becf', '#9edae5']
		},	
		axis: {
			y: {
				tick: {
					format: d3.format("%")
				}
			},
			x: {
				type : 'timeseries',
				tick : {
					format : "%Y" ,
					culling: false
				}
			}
		}
	});	
	
	var chart2 = c3.generate({
		bindto: '#chart2',
		data: {
			x: 'year',
			x_format: '%Y',
			url: '/myd3/gdp_by_sector/SouthEastAsia.csv',
			names: {
				sec1: 'Agriculture',
				sec2: 'Industry',
				sec3: 'Service'
			},
			type: 'bar',
			groups: [
				['sec1', 'sec2', 'sec3']
			]
		},
		bar: {
			width: {
				ratio: 0.9
			}
		},
		color: {
			pattern: ['#4DB870', '#DB944D', '#94B8FF', '#94B8FF', '#A366FF', '#FF99FF', '#FF8533', '#B85C00', '#98df8a', '#d62728', '#ff9896', '#9467bd', '#c5b0d5', '#8c564b', '#c49c94', '#e377c2', '#f7b6d2', '#7f7f7f', '#c7c7c7', '#bcbd22', '#dbdb8d', '#17becf', '#9edae5']
		},	
		axis: {
			y: {
				tick: {
					format: d3.format("%")
				}
			},
			x: {
				type : 'timeseries',
				tick : {
					format : "%Y",
					culling: false
				}
			}
		}
	});	
	
	</script>
    </body>
</html>